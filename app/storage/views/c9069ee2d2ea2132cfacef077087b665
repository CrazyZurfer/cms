<?php if($migrations['info']): ?>
	<table class="table table-hover well" style="font-family:Menlo,Monaco,Consolas,'Courier New',monospace; font-size: 14px">
		<tr>
			<th>Field</th>
			<th>Type</th>
			<th>Null</th>
			<th>Key</th>
			<th>Default</th>
			<th>Extra</th>
		</tr>
		<?php foreach($migrations['info'] as $info): ?>
			<tr>
				<td><?php echo $info->Field; ?></td>
				<td><?php echo $info->Type; ?></td>
				<td><?php echo $info->Null; ?></td>
				<td><?php echo $info->Key; ?></td>
				<td><?php echo $info->Default; ?></td>
				<td><?php echo $info->Extra; ?></td>
			</tr>
		<?php endforeach; ?>
	</table>
<?php else: ?>
<div class="alert alert-danger">
	Table does not exist
</div>
<?php endif; ?>

<hr>

<h4>
	<a class="btn btn-primary btn-xs pull-right" 
	href="<?php echo URL::route('dev.entities.migrate', $entity->id); ?>?migration=refresh">Run</a>
	Refresh:
</h4>
<?php if(!$migrations['info']): ?>
	<div class="alert alert-warning">
		Required
	</div>
<?php endif; ?>
<pre><?php echo $migrations['refresh']; ?></pre>

<hr>

<h4>
	<a class="btn btn-primary btn-xs pull-right" 
	href="<?php echo URL::route('dev.entities.migrate', $entity->id); ?>?migration=delete">Run</a>
	Delete:
</h4>
<pre><?php echo $migrations['delete']; ?></pre>


<?php foreach($entity->attributes as $index => $attribute): ?>
	<hr>
	<h4>
		<a class="btn btn-primary btn-xs pull-right" 
		href="<?php echo URL::route('dev.entities.migrate', $entity->id); ?>?migration=attributes.<?php echo $attribute->name; ?>.up">Run</a>
		<?php echo $attribute->name; ?> up:
	</h4>
	<?php if($migrations['info']): ?>
		<?php if(!in_array($attribute->name, array_pluck($migrations['info'], 'Field'))): ?>
			<div class="alert alert-warning">
				Required
			</div>
		<?php endif; ?>
	<?php endif; ?>
	<pre><?php echo $migrations['attributes'][$attribute->name]['up']; ?></pre>

	<hr>
	<h4>
		<a class="btn btn-primary btn-xs pull-right" 
		href="<?php echo URL::route('dev.entities.migrate', $entity->id); ?>?migration=attributes.<?php echo $attribute->name; ?>.down">Run</a>
		<?php echo $attribute->name; ?> down:
	</h4>
	<pre><?php echo $migrations['attributes'][$attribute->name]['down']; ?></pre>

<?php endforeach; ?>

<hr>
<a href="<?php echo URL::route('dev.entities.show', $entity->id); ?>" class="btn btn-default">Back</a>
